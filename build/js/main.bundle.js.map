{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-photo.js","webpack://kekstagram/./source/js/picture-preview.js","webpack://kekstagram/./source/js/photo-filters.js","webpack://kekstagram/./source/js/alertMessage.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/form-validation.js","webpack://kekstagram/./source/js/upload-photo.js","webpack://kekstagram/./source/js/filter-handlers.js","webpack://kekstagram/./source/js/main.js"],"sourcesContent":["const getRandom = (min, max) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (min >= max) {\n    [min, max] = [max, min];\n  }\n\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  let number = Math.floor(Math.random() * (max - min + 1)) + min;\n  return number;\n}\n\n//Проверка длины строки\nconst stringCount = (text, textLength) => text.length <= textLength;\n// {\n//  return (text.length <= textLength) ? true : false;\n// }\n\nconst isEscEvent = (evt)=>{\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\n\n\nexport {getRandom, stringCount, isEscEvent};\n\n","import {isEscEvent} from './util.js';\nconst COMMENTS_LOAD_AMOUNT = 5;\nconst photoPopup = document.querySelector('.big-picture');\nconst commentsList = photoPopup.querySelector('.social__comments');\nconst commentCountBlock = photoPopup.querySelector('.social__comment-count');\nconst commentsLoader = photoPopup.querySelector('.comments-loader');\nconst body = document.querySelector('body');\nconst PhotoPopupButtonClose = photoPopup.querySelector('.big-picture__cancel');\nlet totalComments = [];\nlet loadedComents = COMMENTS_LOAD_AMOUNT;\n\nconst PhotoPopupCloseHandler = () => {\n  photoPopup.classList.add('hidden');\n  body.classList.remove('modal-open');\n  document.removeEventListener('keydown',EscKeydownHandler);\n};\n\nconst EscKeydownHandler = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    PhotoPopupCloseHandler();\n    PhotoPopupButtonClose.removeEventListener('click', PhotoPopupCloseHandler);\n  }\n};\n\nconst renderComments = (commentsArr) => {\n\n  const onLoadCommentsClick = ()=>{\n    loadedComents += COMMENTS_LOAD_AMOUNT;\n    renderComments(commentsArr);\n  };\n\n  loadedComents = (commentsArr.length < COMMENTS_LOAD_AMOUNT)? commentsArr.length : loadedComents  ;\n  console.log(loadedComents);\n  totalComments = commentsArr.slice(0,loadedComents);\n\n  commentCountBlock.textContent = ` ${totalComments.length} из ${commentsArr.length} комментариев`;\n  if(commentsArr.length > COMMENTS_LOAD_AMOUNT && totalComments.length < commentsArr.length){\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click',onLoadCommentsClick, {once:true});\n  }else{\n    commentsLoader.classList.add('hidden');\n    loadedComents = COMMENTS_LOAD_AMOUNT;\n  }\n\n  const newCommentsList = document.createDocumentFragment();\n  totalComments.forEach((comment) => {\n    const newComment = commentsList.querySelector('.social__comment').cloneNode(true);\n    newComment.querySelector('img').src = comment.avatar;\n    newComment.querySelector('img').alt = comment.name;\n    newComment.querySelector('.social__text').textContent = comment.message;\n    newCommentsList.appendChild(newComment);\n  })\n  commentsList.textContent = '';\n  commentsList.appendChild(newCommentsList);\n\n};\n\nconst openBigPicture = (picture) => {\n  photoPopup.classList.remove('hidden');\n  photoPopup.querySelector('img:first-of-type').src = picture.url;\n  photoPopup.querySelector('.likes-count').textContent = picture.likes;\n\n  photoPopup.querySelector('.social__caption').textContent = picture.description;\n  //create comments\n  renderComments(picture.comments);\n  //commentCountBlock.classList.add('hidden');\n\n  body.classList.add('modal-open');\n  PhotoPopupButtonClose.addEventListener('click', PhotoPopupCloseHandler);\n  document.addEventListener('keydown', EscKeydownHandler);\n}\n\nexport { openBigPicture };\n","// import {\n//   getPhotoDescriptionArray\n// } from './data.js';\nimport {\n  openBigPicture\n} from './big-photo.js';\n\nconst picture = document.querySelector('#picture').content.querySelector('.picture');\nlet pictures = document.querySelector('.pictures');\n//const photoArray = getPhotoDescriptionArray();\n\nconst renderPhoto = (photoArray) => {\n  let fragment = document.createDocumentFragment();\n\n  photoArray.forEach((photo) => {\n    let newPicture = picture.cloneNode(true);\n    newPicture.querySelector('.picture__img').src = photo.url;\n    newPicture.querySelector('.picture__likes').textContent = photo.likes;\n    newPicture.querySelector('.picture__comments').textContent = photo.comments.length;\n    newPicture.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      openBigPicture(photo);\n    });\n    fragment.appendChild(newPicture);\n  });\n\n  pictures.appendChild(fragment);\n}\n\nexport {\n  renderPhoto\n};\n","const imagePreview = document.querySelector('.img-upload__preview > img');\nconst form = document.querySelector('.img-upload__form');\nconst slider = form.querySelector('.effect-level__slider');\nconst effectLevelValue = form.querySelector('.effect-level__value');\nconst effectLevel = form.querySelector('.img-upload__effect-level');\n\nnoUiSlider.create(slider, {\n  range: {\n    min: 0,\n    max: 100,\n  },\n  start: 100,\n  step: 1,\n  connect: 'lower',\n});\n\nconst effects = {\n  'phobos': () => {\n    effectLevel.classList.remove('visually-hidden');\n    return `blur(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01}px)`;\n  },\n  'heat': () => {\n    effectLevel.classList.remove('visually-hidden');\n    return `brightness(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01})`;\n  },\n  'marvin': () => {\n    effectLevel.classList.remove('visually-hidden');\n    return `invert(${(Math.floor(effectLevelValue.value))}%)`;\n  },\n  'sepia': () => {\n    effectLevel.classList.remove('visually-hidden');\n    return `sepia(${(parseInt(effectLevelValue.value, 10) * 0.01)})`;\n  },\n  'chrome': () => {\n    effectLevel.classList.remove('visually-hidden');\n    return `grayscale(${(parseInt(effectLevelValue.value, 10) * 0.01)})`;\n  },\n  'none': () => {\n    effectLevel.classList.add('visually-hidden');\n    return 'none';\n  },\n}\n\nconst editingPhoto = () => {\n  effectLevel.classList.add('visually-hidden');\n  imagePreview.style.filter = 'none';\n  form.addEventListener('change', (evt) => {\n    imagePreview.classList.remove(...imagePreview.classList);\n    slider.noUiSlider.set(100);\n    if (evt.target.matches('.effects__radio')) {\n\n      imagePreview.classList.add('effects__preview--' + evt.target.value);\n      effectLevelValue.value = '100';\n      imagePreview.style.filter = effects[evt.target.value]();\n\n      slider.noUiSlider.on('change', () => {\n        effectLevelValue.value = slider.noUiSlider.get();\n        imagePreview.style.filter = effects[evt.target.value]();\n      });\n\n    }\n  });\n};\n\nexport { editingPhoto };\n\n//evt.target.matches('input[type=\"radio\"]'\n","import {isEscEvent} from './util.js';\n\n\n\nconst showSuccess = ()=>{\n  const successMessage = document.querySelector('#success').content.querySelector('.success').cloneNode(true);\n  console.log(successMessage);\n  const closeSuccessMessageButton = successMessage.querySelector('.success__button');\n\n  const closeMassage = ()=>{\n    successMessage.remove();\n  };\n\n  closeSuccessMessageButton.addEventListener('click',closeMassage);\n\n  const EscKeydownHandler = (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      closeMassage();\n    }\n  };\n  document.addEventListener('keydown', EscKeydownHandler);\n  document.addEventListener('click',(evt)=>{\n    let e = successMessage.querySelector('.success__title');\n    if(!e.contains(evt.target)){\n      closeMassage();\n    }\n  });\n  document.body.appendChild(successMessage);\n};\n\nconst showError = ()=>{\n  const errorMessage = document.querySelector('#error').content.querySelector('.error').cloneNode(true);\n  errorMessage.style.zIndex= '2';\n  const closeErrorMessageButton = errorMessage.querySelector('.error__button');\n\n  const closeMassage = ()=>{\n    errorMessage.remove();\n  };\n\n  closeErrorMessageButton.addEventListener('click',closeMassage);\n\n  const EscKeydownHandler = (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      closeMassage();\n    }\n  };\n  document.addEventListener('keydown', EscKeydownHandler);\n  document.addEventListener('click',(evt)=>{\n    let e = errorMessage.querySelector('.error__title');\n    if(!e.contains(evt.target)){\n      closeMassage();\n    }\n  });\n  document.body.append(errorMessage);\n};\nexport {showSuccess,showError};\n","const Urls = {\n  GET: 'https://22.javascript.pages.academy/kekstagram/data',\n  POST: 'https://22.javascript.pages.academy/kekstagram',\n}\n\nconst request = (onSuccess, onError, method, data) => {\n  fetch(Urls[method],\n    {\n      method: method,\n      body: data,\n    })\n    .then((response) => response.json())\n    .then((response) => {\n      onSuccess(response);\n\n    })\n    .catch(() => {\n      onError();\n    })\n}\n\nexport { request };\n","import {showSuccess, showError} from './alertMessage.js';\nimport { request } from './fetch.js';\nconst form = document.querySelector('.img-upload__form');\nconst hashtag = form.querySelector('.text__hashtags');\nconst commentText = form.querySelector('.text__description');\nconst publicBtn = form.querySelector('.img-upload__submit');\n\n\nconst validateComments = ()=>{\n  commentText.value = '';\n  commentText.addEventListener('keydown',(evt) => {\n    if (evt.key === 'Escape' || evt.key === 'Esc') {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  });\n  commentText.addEventListener('change',()=>{\n    if(commentText.value.length>10){\n      commentText.setCustomValidity('длина комментария не может составлять больше 140 символов');\n    }else{\n      commentText.setCustomValidity('');\n    }\n  });\n};\n\nconst validateHashtag = ()=>{\n  hashtag.value = '';\n  hashtag.style.outline = 'none';\n  hashtag.setCustomValidity('');\n  hashtag.addEventListener('input', () => {\n    hashtag.setCustomValidity('');\n    let hashtagText = hashtag.value.toLowerCase().trim();\n    if(!hashtagText){\n      hashtag.style.outline= 'none';\n      return;\n    }\n    let hashtagArr = hashtagText.split(/\\s+/);\n    if(hashtagArr.length===0){\n\n      return;\n    }\n\n    hashtagArr.forEach((element, index) => {\n\n      if (!(/^[a-zа-я ^0-9#]*$/i.test(element))) {\n        hashtag.setCustomValidity('не может содержать пробелы, спецсимволы (@, $ и т. п.)');\n      }\n      if (index > 4) {\n        hashtag.setCustomValidity('нельзя указать больше пяти хэш-тегов');\n      }\n    });\n    const isNotHash = hashtagArr.some((value) => {\n      return value[0] !== '#';\n    });\n    if (isNotHash) {\n      hashtag.setCustomValidity('хэш-тег начинается с символа #');\n    }\n    const isTooLong = hashtagArr.some((value) => {\n      return value.length > 20;\n    });\n    if (isTooLong) {\n      hashtag.setCustomValidity('максимальная длина одного хэш-тега 20 символов, включая решётку');\n    }\n\n    const isTooShort = hashtagArr.some((value) => {\n      return value === '#';\n    });\n    if (isTooShort) {\n      hashtag.setCustomValidity('хеш-тег не может состоять только из одной решётки');\n    }\n\n    const isSameHashtag = hashtagArr.some((value, index, arr) => {\n      return arr.indexOf(value, index + 1) >= index;\n    });\n    if (isSameHashtag) {\n      hashtag.setCustomValidity('один и тот же хэш-тег не может быть использован дважды');\n    }\n\n    if (!hashtag.validity.valid) {\n      hashtag.style.outline = '3px red solid';\n    } else {\n      hashtag.style.outline = 'none';\n    }\n    hashtag.reportValidity();\n  });\n  hashtag.addEventListener('keydown',(evt) => {\n    if (evt.key === 'Escape' || evt.key === 'Esc') {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  });\n  publicBtn.addEventListener('click', (evt) => {\n    if(!hashtag.validity.valid){\n      evt.preventDefault();\n    }\n  });\n};\n\n\nconst setUserFormSubmit = (closeForm) => {\n  const onSuccess = ()=>{\n    showSuccess();\n    closeForm();\n  };\n  form.addEventListener('submit',(evt)=>{\n    evt.preventDefault();\n\n    const formData = new FormData(evt.target);\n\n    request(onSuccess,showError,'POST',formData);\n  });\n};\n\nexport {validateHashtag, validateComments,setUserFormSubmit};\n","import {isEscEvent} from './util.js';\nimport {editingPhoto} from './photo-filters.js';\nimport {validateHashtag, validateComments} from './form-validation.js';\n//import './form-validation.js';\nconst SCALE_VALUE = {\n  MIN:25,\n  MAX:100,\n  STEP:25,\n};\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst photoLoader = document.querySelector('#upload-file');\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\nconst body = document.querySelector('body');\nconst overlayCloseButton = uploadOverlay.querySelector('#upload-cancel');\nconst scaleControlSmaller = uploadOverlay.querySelector('.scale__control--smaller');\nconst scaleControlBigger = uploadOverlay.querySelector('.scale__control--bigger');\nconst scaleControlValue = uploadOverlay.querySelector('.scale__control--value');\nconst imagePreview = uploadOverlay.querySelector('.img-upload__preview > img');\nconst effectsPreview = document.querySelectorAll('.effects__preview');\nconst editPhoto = () => {\n  let newScaleControlValue = SCALE_VALUE.MAX;\n\n  scaleControlValue.value = newScaleControlValue + '%';\n  imagePreview.style.transform = 'scale('+ (newScaleControlValue/100) +')';\n\n  scaleControlSmaller.addEventListener('click', ()=>{\n    if (newScaleControlValue <= SCALE_VALUE.MIN) {\n      newScaleControlValue -= 0;\n    } else {\n      newScaleControlValue -= SCALE_VALUE.STEP;\n      scaleControlValue.value = newScaleControlValue + '%' ;\n      imagePreview.style.transform = 'scale('+ (newScaleControlValue/100) +')';\n    }\n  });\n  scaleControlBigger.addEventListener('click', ()=>{\n    if (newScaleControlValue >= SCALE_VALUE.MAX) {\n      newScaleControlValue += 0;\n    } else {\n      newScaleControlValue += SCALE_VALUE.STEP;\n      scaleControlValue.value = newScaleControlValue + '%' ;\n      imagePreview.style.transform = 'scale('+ (newScaleControlValue/100) +')';\n    }\n  });\n};\n\nconst closeOverlayHandler = ()=>{\n  uploadOverlay.classList.add('hidden');\n  body.classList.remove('modal-open');\n  photoLoader.value = '';\n  document.removeEventListener('keydown',EscKeydownHandler);\n};\n\nconst EscKeydownHandler = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeOverlayHandler();\n\n    overlayCloseButton.removeEventListener('click', closeOverlayHandler);\n  }\n};\nconst uploadPhoto = ()=>{\n  photoLoader.addEventListener('change',()=>{\n\n    editPhoto();\n    editingPhoto();\n    validateHashtag();\n    validateComments();\n    uploadOverlay.classList.remove('hidden');\n    body.classList.add('modal-open');\n\n    overlayCloseButton.addEventListener('click', closeOverlayHandler);\n    document.addEventListener('keydown', EscKeydownHandler);\n\n    const file = photoLoader.files[0];\n    const fileName = file.name.toLowerCase();\n\n    const matches = FILE_TYPES.some((it) => {\n      return fileName.endsWith(it);\n    });\n\n    if (matches) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        imagePreview.src = reader.result;\n        effectsPreview.forEach((filter)=>{\n          filter.style.backgroundImage = `url(${reader.result})`;\n        })\n      });\n\n      reader.readAsDataURL(file);\n    }\n\n\n  });\n\n\n};\n\nexport {uploadPhoto, closeOverlayHandler};\n","import {renderPhoto} from './picture-preview.js';\n/* global _:readonly */\nconst RANDOM_PHOTO_AMOUNT = 10;\nconst RERENDER_DELAY = 500;\nconst filters = document.querySelector('.img-filters');\nconst defaultFilter = filters.querySelector('#filter-default');\nconst randomFilter = filters.querySelector('#filter-random');\nconst discussedFilter = filters.querySelector('#filter-discussed');\nconst picturesList = document.querySelector('.pictures');\n\nfunction shuffle(array) {\n  let currentIndex = array.length,  randomIndex;\n\n  // While there remain elements to shuffle.\n  while (currentIndex != 0) {\n\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [array[currentIndex], array[randomIndex]] = [\n      array[randomIndex], array[currentIndex]];\n  }\n\n  return array;\n}\n\nconst getCommentsNumber = (a, b)=>{\n  return b.comments.length - a.comments.length;\n};\n\nconst debounce = (func, timeout = RERENDER_DELAY) => {\n  let timer;\n  return ()=> {\n    clearTimeout(timer);\n    timer = setTimeout(()=>{\n      func();\n    },timeout)\n  };\n};\n\nconst setFilters = (arr)=>{\n\n  defaultFilter.addEventListener('click',()=>{\n    defaultFilter.classList.add('img-filters__button--active');\n    randomFilter.classList.remove('img-filters__button--active');\n    discussedFilter.classList.remove('img-filters__button--active');\n    const pictures = picturesList.querySelectorAll('.picture');\n    pictures.forEach((picture)=>{\n      picture.remove();\n    });\n    //_.debounce(()=>renderPhoto(arr), 500)();\n    debounce(()=>renderPhoto(arr))();\n  });\n\n  randomFilter.addEventListener('click',()=>{\n    defaultFilter.classList.remove('img-filters__button--active');\n    randomFilter.classList.add('img-filters__button--active');\n    discussedFilter.classList.remove('img-filters__button--active');\n    const pictures = picturesList.querySelectorAll('.picture');\n    pictures.forEach((picture)=>{\n      picture.remove();\n    });\n    const arrClone = arr.slice();\n    let randomPhotoArr = shuffle(arrClone).slice(0,RANDOM_PHOTO_AMOUNT);\n    debounce(()=>renderPhoto(randomPhotoArr))();\n\n  });\n\n  discussedFilter.addEventListener('click',()=>{\n    defaultFilter.classList.remove('img-filters__button--active');\n    randomFilter.classList.remove('img-filters__button--active');\n    discussedFilter.classList.add('img-filters__button--active');\n    const pictures = picturesList.querySelectorAll('.picture');\n    pictures.forEach((picture)=>{\n      picture.remove();\n    })\n    let disscussedPhotoArr = arr.slice().sort(getCommentsNumber);\n    debounce(()=>renderPhoto(disscussedPhotoArr))();\n\n  });\n}\nexport {setFilters};\n","/* global _:readonly */\nimport { renderPhoto } from './picture-preview.js';\nimport { uploadPhoto, closeOverlayHandler } from './upload-photo.js';\nimport {setUserFormSubmit} from './form-validation.js';\nimport {showError} from './alertMessage.js';\nimport { request } from './fetch.js';\nimport {setFilters} from './filter-handlers.js';\nconst RERENDER_DELAY = 500;\nuploadPhoto();\n\nconst onSuccess = (photos)=>{\n  console.log(photos);\n  renderPhoto(photos);\n  document.querySelector('.img-filters').classList.remove('img-filters--inactive');\n  setFilters(photos);\n};\n\nrequest(onSuccess, showError, 'GET');\n\nsetUserFormSubmit(closeOverlayHandler);\n"],"names":["isEscEvent","evt","key","photoPopup","document","querySelector","commentsList","commentCountBlock","commentsLoader","body","PhotoPopupButtonClose","totalComments","loadedComents","PhotoPopupCloseHandler","classList","add","remove","removeEventListener","EscKeydownHandler","preventDefault","renderComments","commentsArr","length","console","log","slice","textContent","addEventListener","once","newCommentsList","createDocumentFragment","forEach","comment","newComment","cloneNode","src","avatar","alt","name","message","appendChild","picture","content","pictures","renderPhoto","photoArray","fragment","photo","newPicture","url","likes","comments","description","openBigPicture","imagePreview","slider","effectLevelValue","effectLevel","noUiSlider","create","range","min","max","start","step","connect","effects","parseInt","value","Math","floor","showError","errorMessage","style","zIndex","closeErrorMessageButton","closeMassage","contains","target","append","Urls","GET","POST","request","onSuccess","onError","method","data","fetch","then","response","json","catch","hashtag","commentText","publicBtn","FILE_TYPES","photoLoader","uploadOverlay","overlayCloseButton","scaleControlSmaller","scaleControlBigger","scaleControlValue","effectsPreview","querySelectorAll","closeOverlayHandler","filters","defaultFilter","randomFilter","discussedFilter","picturesList","getCommentsNumber","a","b","debounce","func","timeout","timer","clearTimeout","setTimeout","newScaleControlValue","transform","editPhoto","filter","set","matches","on","get","outline","setCustomValidity","hashtagText","toLowerCase","trim","hashtagArr","split","element","index","test","some","arr","indexOf","validity","valid","reportValidity","stopPropagation","file","files","fileName","it","endsWith","reader","FileReader","result","backgroundImage","readAsDataURL","photos","randomPhotoArr","array","randomIndex","currentIndex","random","shuffle","disscussedPhotoArr","sort","closeForm","successMessage","closeSuccessMessageButton","showSuccess","formData","FormData","setUserFormSubmit"],"sourceRoot":""}